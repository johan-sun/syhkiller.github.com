---
layout : article
title : 解决MathJax与textile冲突
category : 前端
tag :
    - textile
    - mathjax
---

因为要写公式,所以整了个MathJax, 开始使用Markdown, 结果发现太多地方需要转义, 比例公式中需要用@\\@的地方写的时候要@\\\\@, * 的地方需要\ * , 表示下标的 _ 需要\ _ ,后来就换成textile了,textile 总体不错, * _ 等标记是按照分词来划分的,所以紧跟着写 * _ 都不要紧.

但是还是发现有问题的地方,比如如下$\TeX$ @J(\left(b_mb_{m-1}\cdots b_2b_0\right)_2) &= 2\left(0b_{m-1}\cdots b_1b_0\right)_2 + 1@, 由于部分_会被替换成i标签,导致MathJax渲染失败,所以比较纠结.

研究了下,textile文字修饰的标记是更具分词来决定的, 必须是两个_之间内容,拿掉_后可以被分词, 所以英文原本就是按照空格分词,中文需要加空格分词, 但是如果_前面是标点符号,那么也可以被分词的,如下的都可以被修饰

bq. 文字 ==_强调_==
文字,==_强调_==
文字)==_强调_==

修饰后

bq. 文字 _强调_
文字,_强调_
文字)_强调_


但是再仔细一研究,发现第一个_后面需要紧跟内容,不能有空白,所以为了防止意外被解析导致MathJax渲染失败,可以按照凡是写下标发现前面不是一个字母,是)}等,写_后空一格,然后在写下标的内容
如下不会被修饰

bq. 文字 _ 强调_
文字,_ 强调_
文字)_ 强调_
